(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[992],{34540:function(L,c,t){"use strict";var e=t(28991),_=t(81253),p=t(85893),o=t(86190),f=t(67294),m=t(66758),O=t(88305),x=["fieldProps","proFieldProps"],P="dateRange",D=f.forwardRef(function(T,r){var i=T.fieldProps,u=T.proFieldProps,E=(0,_.Z)(T,x),C=(0,f.useContext)(m.Z);return(0,p.jsx)(O.Z,(0,e.Z)({ref:r,fieldProps:(0,e.Z)({getPopupContainer:C.getPopupContainer},i),valueType:P,proFieldProps:u,filedConfig:{valueType:P,lightFilterLabelFormatter:function(R){return(0,o.Z)(R,(i==null?void 0:i.format)||"YYYY-MM-DD")}}},E))});c.Z=D},5966:function(L,c,t){"use strict";var e=t(28991),_=t(81253),p=t(85893),o=t(88305),f=["fieldProps","proFieldProps"],m=["fieldProps","proFieldProps"],O="text",x=function(r){var i=r.fieldProps,u=r.proFieldProps,E=(0,_.Z)(r,f);return(0,p.jsx)(o.Z,(0,e.Z)({valueType:O,fieldProps:i,filedConfig:{valueType:O},proFieldProps:u},E))},P=function(r){var i=r.fieldProps,u=r.proFieldProps,E=(0,_.Z)(r,m);return(0,p.jsx)(o.Z,(0,e.Z)({valueType:"password",fieldProps:i,proFieldProps:u,filedConfig:{valueType:O}},E))},D=x;D.Password=P,D.displayName="ProFormComponent",c.Z=D},40321:function(L){L.exports={main:"main___v2Z5L",headerList:"headerList___Mnegm",stepDescription:"stepDescription___4Ib3o",pageHeader:"pageHeader___B__A4",moreInfo:"moreInfo___3RsSn"}},36495:function(L,c,t){"use strict";t.d(c,{O:function(){return e}});var e={PHONE:576,LARGE_PHONE:768,TABLET:992,LARGE_TABLET:1200,DESKTOP:1520},_={PHONE_UP:"@media only screen and (min-width: ".concat(e.PHONE,"px)"),LARGE_PHONE_UP:"@media only screen and (min-width: ".concat(e.LARGE_PHONE,"px)"),TABLET_UP:"@media only screen and (min-width: ".concat(e.TABLET,"px)"),LARGE_TABLET_UP:"@media only screen and (min-width: ".concat(e.LARGE_TABLET,"px)"),DESKTOP_UP:"@media only screen and (min-width: ".concat(e.DESKTOP,"px)")}},78418:function(L,c,t){"use strict";t.r(c);var e=t(58024),_=t(91894),p=t(8963),o=t(42020),f=t(57663),m=t(71577),O=t(34792),x=t(48086),P=t(71194),D=t(48889),T=t(9715),r=t(16579),i=t(2824),u=t(20310),E=t(47957),C=t(57119),Z=t(76570),R=t(1977),d=t(34540),l=t(5966),A=t(85296),n=t(21349),K=t(30381),I=t.n(K),g=t(67294),W=t(12788),N=t(13752),y=t(73727),F=t(74622),q=t(40321),H=t.n(q),G=t(36495),a=t(85893),$,tt=W.ZP.div($||($=(0,u.Z)([`
  margin-bottom: 24px;
  display: flex;
  justify-content: space-between;
  gap: 24px;
  flex-wrap: wrap;
  align-items: center;

  & > div {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    #search-button,
    label[for='filter-form_fullName'] {
      margin-left: 16px;
    }
    .ant-form-item {
      margin-bottom: 0;
    }
    @media (max-width: `,`px) {
      .ant-form-item {
        margin-bottom: 24px !important;
      }
      #search-button,
      label[for='filter-form_fullName'] {
        margin-left: 0;
      }
    }
  }
  @media (max-width: `,`px) {
    flex-direction: column-reverse;
    gap: 24px;
    align-items: end !important;
    .action-cell {
      display: flex;
    }
  }
`])),G.O.PHONE,G.O.PHONE),Y=function(j){return j.map(function(h){return{key:h.id,patientId:h.id,name:h.fullName,dateOfBirth:h.dateOfBirth,address:h.address,action:h}})},et=function(){var j=(0,E.Z)(),h=j.run,nt=j.isLoading,z=(0,E.Z)(),st=z.run,Pt=z.isLoading,rt=(0,g.useState)([]),V=(0,i.Z)(rt,2),it=V[0],X=V[1],ot=(0,g.useState)(0),Q=(0,i.Z)(ot,2),lt=Q[0],k=Q[1],_t=(0,g.useState)(0),J=(0,i.Z)(_t,2),S=J[0],dt=J[1],ct=r.Z.useForm(),pt=(0,i.Z)(ct,1),B=pt[0],b=(0,g.useCallback)(function(){var v=B.getFieldValue("dateRange"),s=B.getFieldValue("fullName"),M=v[0],U=v[1];h((0,F.sH)({page:S,startDate:M,endDate:U,fullName:s})).then(function(w){X(Y(w.results)),k(w.total)})},[S,B]);(0,g.useEffect)(function(){b()},[S,b]);var ut=function(s){D.Z.confirm({title:"X\xE1c nh\u1EADn",icon:(0,a.jsx)(C.Z,{"data-inspector-line":"92","data-inspector-column":"12","data-inspector-relative-path":"src/pages/patients/list/index.tsx"}),content:"B\u1EA1n c\xF3 ch\u1EAFc l\xE0 mu\u1ED1n x\xF3a b\u1EC7nh nh\xE2n ".concat(s.fullName," ch\u1EE9?"),okText:"C\xF3",cancelText:"Kh\xF4ng",onOk:function(){st((0,F.hT)(s.id)).then(function(U){x.ZP.success("X\xF3a b\u1EC7nh nh\xE2n th\xE0nh c\xF4ng!"),console.log(U),b()})}})},mt=[{title:"STT",dataIndex:"key",key:"key",width:60,render:function(s,M,U){return U+1}},{key:"patientId",title:"M\xE3 b\u1EC7nh nh\xE2n",width:150,dataIndex:"patientId"},{title:"H\u1ECD v\xE0 t\xEAn",dataIndex:"name",key:"name"},{title:"\u0110\u1ECBa ch\u1EC9",dataIndex:"address",key:"address"},{key:"dateOfBirth",title:"Ng\xE0y sinh",dataIndex:"dateOfBirth",render:function(s){return I()(s).format("DD-MM-YYYY")}},{title:"H\xE0nh \u0111\u1ED9ng",dataIndex:"action",key:"action",render:function(s){return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{"data-inspector-line":"145","data-inspector-column":"12","data-inspector-relative-path":"src/pages/patients/list/index.tsx",className:"action-cell",children:[(0,a.jsx)("span",{"data-inspector-line":"146","data-inspector-column":"14","data-inspector-relative-path":"src/pages/patients/list/index.tsx",style:{cursor:"pointer",color:"var(--ant-primary-color)"},onClick:function(){N.m8.push("/patients/".concat(s.id))},children:"Ph\xE2n t\xEDch"}),(0,a.jsx)(y.rU,{"data-inspector-line":"154","data-inspector-column":"14","data-inspector-relative-path":"src/pages/patients/list/index.tsx",to:"/patients/".concat(s.id,"/edit"),style:{marginLeft:8,cursor:"pointer",color:"var(--ant-primary-color)"},children:"S\u1EEDa"}),(0,a.jsx)("span",{"data-inspector-line":"160","data-inspector-column":"14","data-inspector-relative-path":"src/pages/patients/list/index.tsx",onClick:function(){return ut(s)},style:{marginLeft:8,color:"red",cursor:"pointer"},children:"X\xF3a"})," "]})})}}],Et=function(){B.validateFields().then(function(s){h((0,F.sH)({page:S,startDate:s.dateRange[0],endDate:s.dateRange[1],fullName:s.fullName})).then(function(M){X(Y(M.results)),k(M.total)})}).catch(function(s){console.log("Validate Failed:",s)})};return(0,a.jsx)(A.ZP,{"data-inspector-line":"195","data-inspector-column":"4","data-inspector-relative-path":"src/pages/patients/list/index.tsx",children:(0,a.jsx)("div",{"data-inspector-line":"196","data-inspector-column":"6","data-inspector-relative-path":"src/pages/patients/list/index.tsx",className:H().main,children:(0,a.jsx)(n.Z,{"data-inspector-line":"197","data-inspector-column":"8","data-inspector-relative-path":"src/pages/patients/list/index.tsx",children:(0,a.jsxs)(_.Z,{"data-inspector-line":"198","data-inspector-column":"10","data-inspector-relative-path":"src/pages/patients/list/index.tsx",className:H().tabsCard,bordered:!1,children:[(0,a.jsx)(r.Z,{"data-inspector-line":"199","data-inspector-column":"12","data-inspector-relative-path":"src/pages/patients/list/index.tsx",name:"filter-form",form:B,initialValues:{dateRange:F.Zk,fullName:""},children:(0,a.jsxs)(tt,{"data-inspector-line":"207","data-inspector-column":"14","data-inspector-relative-path":"src/pages/patients/list/index.tsx",children:[(0,a.jsxs)("div",{"data-inspector-line":"208","data-inspector-column":"16","data-inspector-relative-path":"src/pages/patients/list/index.tsx",id:"filter-wrapper",children:[(0,a.jsx)(d.Z,{"data-inspector-line":"209","data-inspector-column":"18","data-inspector-relative-path":"src/pages/patients/list/index.tsx",name:"dateRange",label:"L\u1ECDc theo ng\xE0y",placeholder:["T\u1EEB ng\xE0y","\u0110\u1EBFn ng\xE0y"]}),(0,a.jsx)(l.Z,{"data-inspector-line":"214","data-inspector-column":"18","data-inspector-relative-path":"src/pages/patients/list/index.tsx",name:"fullName",id:"name-input",label:"L\u1ECDc theo t\xEAn",placeholder:"L\u1ECDc theo t\xEAn"}),(0,a.jsx)(m.Z,{"data-inspector-line":"221","data-inspector-column":"18","data-inspector-relative-path":"src/pages/patients/list/index.tsx",type:"primary",id:"search-button",icon:(0,a.jsx)(Z.Z,{"data-inspector-line":"224","data-inspector-column":"26","data-inspector-relative-path":"src/pages/patients/list/index.tsx"}),onClick:Et,children:"T\xECm ki\u1EBFm"})]}),(0,a.jsx)(m.Z,{"data-inspector-line":"230","data-inspector-column":"16","data-inspector-relative-path":"src/pages/patients/list/index.tsx",type:"primary",icon:(0,a.jsx)(R.Z,{"data-inspector-line":"232","data-inspector-column":"24","data-inspector-relative-path":"src/pages/patients/list/index.tsx"}),onClick:function(){N.m8.push("/patients/add")},children:"Th\xEAm thai ph\u1EE5"})]})}),(0,a.jsx)(o.Z,{"data-inspector-line":"241","data-inspector-column":"12","data-inspector-relative-path":"src/pages/patients/list/index.tsx",pagination:{position:["bottomRight"],total:lt,pageSize:10,onChange:function(s){dt(s-1)}},loading:nt,dataSource:it,columns:mt})]})})})})};c.default=et},74622:function(L,c,t){"use strict";t.d(c,{Zk:function(){return P},sH:function(){return T},zn:function(){return i},dG:function(){return E},hT:function(){return Z}});var e=t(39428),_=t(3182),p=t(28604),o=t(42174),f=t(70594),m=t(63305),O=t(30381),x=t.n(O),P=[(0,f.L)().start,(0,f.L)().end],D=10;function T(d){return r.apply(this,arguments)}function r(){return r=(0,_.Z)((0,e.Z)().mark(function d(l){var A,n,K,I,g,W;return(0,e.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return A=l.page,n=l.startDate,K=n===void 0?P[0]:n,I=l.endDate,g=I===void 0?P[1]:I,W=l.fullName,y.abrupt("return",(0,o.Z)("/patients",{headers:{Authorization:"Bearer ".concat(m.Z.get().accessToken)},params:{page:A,fullName:W,limit:D,startDate:x()(K).startOf("day").toISOString(),endDate:x()(g).endOf("day").toISOString()},method:"GET"}));case 2:case"end":return y.stop()}},d)})),r.apply(this,arguments)}function i(d){return u.apply(this,arguments)}function u(){return u=(0,_.Z)((0,e.Z)().mark(function d(l){return(0,e.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,o.Z)("/patients/"+l));case 1:case"end":return n.stop()}},d)})),u.apply(this,arguments)}function E(d){return C.apply(this,arguments)}function C(){return C=(0,_.Z)((0,e.Z)().mark(function d(l){return(0,e.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,o.Z)((0,p.T$)(l.testName,l.patientId),{data:l,method:"DELETE",headers:{Authorization:"Bearer ".concat(m.Z.get().accessToken)}}));case 1:case"end":return n.stop()}},d)})),C.apply(this,arguments)}function Z(d){return R.apply(this,arguments)}function R(){return R=(0,_.Z)((0,e.Z)().mark(function d(l){return(0,e.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,o.Z)("/patients/"+l,{method:"DELETE",headers:{Authorization:"Bearer ".concat(m.Z.get().accessToken)}}));case 1:case"end":return n.stop()}},d)})),R.apply(this,arguments)}},70594:function(L,c,t){"use strict";t.d(c,{L:function(){return e}});var e=function(){var p=new Date;p.setDate(-30),p.setUTCHours(0,0,0,0);var o=new Date;return o.setUTCHours(23,59,59,999),{start:p.toISOString(),end:o.toISOString()}}}}]);
